volatile 有两个功能：

- 可见行

  > e.g. 不能保证多线程并发安全反例：线程A，B修改了一个  volatile修饰的对象a，
  >
  > 进行a++操作。a++操作分为几个指令，其中赋值为最后一个指令。
  >
  > A，B同时进行a++操作，此时A，B进行到assign指令，A的指令结束后，会立刻同步给线程B，在线程B中对a进行load和read，继续assign操作，则B线程对a++操作其实是失败且错误的
  >
  > 简言之，volatile无法保证可见性

- 防止指令重排序

  > 单例double check可以作为例子
  >
  > 把new 对象的操作拆分为几条指令



注：long和double是64位的，如果不使用volatile修饰，可能会读到半个变量的情况，但是一般的虚拟机实现都是将long和double变量的读写实现成原子操作。